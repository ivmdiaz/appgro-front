<app-header-principal></app-header-principal>
<div class="container-main" *ngIf="consultaExitosa">

  <div fxLayout="row" fxLayoutGap="12px" [style.margin-bottom]="'12px'">
    <button mat-raised-button color="primary" (click)="openDialogEditar(null)"> Nueva Tienda</button>
  </div>
  <div fxLayout="row wrap" fxLayoutGap="30px grid">
    <div [fxFlex]="(100/3) + '%'" fxFlex.xs="100%" fxFlex.sm="33%" fxFlexFill
      *ngFor="let element of dataSource">
      <mat-card class="mat-elevation-z4">

        <mat-card-header class="header" >
          <mat-card-title-group>
            <mat-card-title>{{ (element.nombre.length>30)? (element.nombre | slice:0:30)+'...':(element.nombre) }}</mat-card-title>
            <mat-card-subtitle>{{element.ciudad}} - {{element.departamento}} > {{element.direccion}}</mat-card-subtitle>
          </mat-card-title-group>
          <div fxFlex></div>
          <button mat-button (click)="openDialogEditar(element)">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-button (click)="openDialogEliminar(element)">
            <mat-icon>delete</mat-icon>
          </button>
        </mat-card-header>

        <mat-card-content>
          <p>
            {{ (element.descripcion.length>100)? (element.descripcion |
              slice:0:100)+'...':(element.descripcion) }}
          </p>
          <p>
            <b>Correos</b> {{element.correo}}
          </p>

          <p *ngIf="element.telefono2; else sin_telefono2">
            <b>Teléfonos:</b> {{element.telefono1}} o {{element.telefono2}}
          </p>
          <ng-template #sin_telefono2>
            <p>
              <b>Teléfono:</b> {{element.telefono1}}
            </p>
          </ng-template>

        </mat-card-content>
        <mat-card-actions>
          <button mat-button color="primary" (click)="goToProductos(element)">Ver Productos</button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
</div>